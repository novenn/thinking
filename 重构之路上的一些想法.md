持续做重构这件事情已经有一年多时间了，多多少少有点收获，有点想法。

今天在这里留个笔记，如果你看到， 对你有所帮助，请给个小星星。

接受这个项目的时候，是两年前。进入这个项目组的时候，我才知道，原来这是公司的重点项目，而且这个项目已经持续维护了三年。

刚开始进入项目的时候，老大只是让我做一些边缘的功能，因为他告诉我：这个项目代码比较“乱”，你先熟悉一下，然后我就一直在核心功能的边缘游走。偶尔帮其他兄弟改改核心功能的 bug。

就这么一直混了两三个月，也跟着做了几个版本的迭代。总体给我的感觉就像老大说的一样--乱。

那个时候的状态是，改一个 bug 可能要看一天的代码，甚至更长时间，才能看懂原来的逻辑。

而更多的情况是，看不太懂逻辑，但是加了个if判断，代码就能正常运行。那时候最常说的一句话就是：i have no idea why, but it works!!!

到了这个时候，项目组人数增加到了3个，由于开发者个体差异，导致项目复杂度进一步增加。

这个时候，我忽然发现，我们项目中，居然没有引入 linting 工具。

顺便说一句，我们的项目是基于Vue2.0的。

但是项目不是使用Vue Cli脚手架搭建的，所以没有拿来即用的 linting 配置。

于是，为了消除开发者个体差异引入的复杂度，我首先提出:

#### 引入 ESLint

其实当时想法很简单，代码“乱”，用个工具格式化就好了

再一个就是，因为人多了，为了保持代码的风格统一，引入lint工具是适当的，顺其自然的，天经地义的事情。

本来项目应该是伴随着 eslint 出生的，结果到那个时候项目都三岁了，开发都走了好几波了，eslint 才珊珊来迟。

因此，代码不“乱”才怪。

可能你没有经历过，给一个三年老项目，包含几百个文件的项目直接运行 `eslint --fix` 的经历。

当我满心以为修复格式之后，会的到一个焕然一新的项目时，他居然卡死了。

后来只能通过在.eslintignore文件里忽略整个项目， 然后逐步放开的方式，写到哪儿，放开到哪儿，修复格式问题到哪儿。

从现在来看，引入 eslint 还是有所收获的。

至少代码的排面不在乱七八糟，一人一种风格。

至少可以提前发现一些语法问题，提前避免一些低级错位。

仅此而已。

我们依然需要花费大量时间梳理代码，才能改好一个小小的 bug。

记得有一次，我改一个 bug 用了两天时间。

那时候，我就得自己是在浪费生命。

然后，我又陷入深深的痛苦当中。

然后，我又发现，之所以跟踪bug很吃力，那是因为，我没法进行*代码推导*，因为Javascript代码没有数据类型，而我们的项目的数据接口，非常的大，算法会给出一个巨大的Json, 前端解析之后使用。

因此在运行时推导，非常痛苦。

于是，我决定（此时我在项目组有了一点权力）：

#### 引入 Typescript





